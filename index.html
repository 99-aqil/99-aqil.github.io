<!DOCTYPE html>
<html>
  <head>
    <title>Button Links</title>
  </head>
  <body>
    <h1>Welcome to Button Links!</h1>
    <p>Click on one of the buttons below to visit the official website of Google, Microsoft, or OpenAI:</p>
    <button onclick="handleClick('Google'); window.open('https://www.google.com','_blank');">Google</button>
    <button onclick="handleClick('Microsoft'); window.open('https://www.microsoft.com','_blank');">Microsoft</button>
    <button onclick="handleClick('OpenAI'); window.open('https://www.openai.com','_blank');">OpenAI</button>

    <script>
      function handleClick(productName) {
        var data = {
          eventName: [
            'Google',
            'Mircrosoft',
            'OpenAI'
          ],
          eventTime: Math.floor(Date.now() / 1000),
          eventSourceUrl: window.location.href,
          userData: {
            email: 'joe@eg.com',
            phone: '12345678901'
          },
          customData: {
            contents: [
              {
                id: productName,
                quantity: 1
              }
            ],
            currency: 'USD',
            value: 123.45
          }
        };

        var pixelId = '554061686441388';
        const accessToken = process.env.FACEBOOKACCESSTOKEN;
        var apiUrl = 'https://graph.facebook.com/v13.0/' + pixelId + '/events';

        var xhr = new XMLHttpRequest();
        xhr.open('POST', apiUrl);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
        xhr.send(JSON.stringify(data));
      }
    </script>
  </body>
</html>
